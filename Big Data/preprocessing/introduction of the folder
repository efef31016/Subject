code for preprocessing (to be sorted into class)
